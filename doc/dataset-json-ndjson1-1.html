<!DOCTYPE html>
<html lang="en">
<head>
  <title>Representing Dataset-JSON as NDJSON</title>
  <style>
      body{
        width: 95%;
        background-color: #FFFFFF;
        font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 75%;
        margin: 0;
        padding: 30px;
      }

      h1{
        font-size: 1.6em;
        margin-left: 0;
        font-weight: bolder;
        text-align: left;
        color: #696969;
      }

      h2{
        font-size: 1.4em;
        margin-left: 0;
        font-weight: bolder;
        text-align: left;
        color: #696969;
      }

      p{
        width: 95%;
      }

      </style>
</head>
<body>

  <h1>Representing Dataset-JSON as NDJSON</h1>

  <h2 id="NDJSON-Introduction">Introduction</h2>

  <p>The purpose of the NDJSON (new-line delimited JSON) representation of Dataset-JSON is to simplify streaming large datasets. With NDJSON, datasets can easily be read or written 1 row at a time without loading the entire dataset into memory. Most programming languages have libraries that can read a large JSON dataset as a stream, but in cases where such a library is not available or performs poorly, the NDJSON format makes it easy for the program to read and write a row at a time. The NDJSON format is an alternative to the JSON format, and both are part of the Dataset-JSON standard.</p>
  <p>DJSON and JSON datasets have the same content. The only difference is that the NDJSON content is written or read as 1 line of valid JSON at a time.</p>
  <p>In a data-exchange scenario, the sender and receiver determine whether to use the JSON or NDJSON representation of Dataset-JSON. Given the relative simplicity of the Dataset-JSON specification, converting between the 2 formats is straightforward. NDJSON example datasets were generated by converting existing JSON Dataset-JSON example datasets.</p>
  <p>NDJSON Dataset-JSON datasets have a file extension of .ndjson (e.g., ae.ndjson). The JSON format uses the .json extension. This is one way to determine the format used for a dataset file.</p>

  <h2 id="NDJSON-format">The Dataset-JSON NDJSON format</h2>

  <p><a href="https://github.com/NDJSON/NDJSON-spec">NDJSON</a> is a standard for delimiting JSON in stream protocols. In NDJSON, each
  line is valid JSON. The JSON is delimited by the newline character (\n or 0x0A) which may be preceeded by a carriage return character (\r or 0x0D). UTF-8 encoding is expected.</p>

  <p>The Dataset-JSON NDJSON format is created from the Dataset-JSON standard by:</p>

  <ul>
    <li>Row 1. Create 1 JSON object that contains the metadata, including the dataset attributes and column definitions.</li>
    <li>Row 2-n. Create 1 JSON array per data row</li>
  </ul>

  <img src="img/ndjson-structure.jpg" alt="NDJSON">

  <p>Each row can be parsed and processed as standalone JSON text.</p>

  <h2 id="NDJSON-examples">Examples</h2>

  <p>The NDJSON example datasets have been converted from the JSON versions, so they contain the same content.
  The examples are available in the <a href="https://github.com/cdisc-org/DataExchange-DatasetJson/tree/publish_v11/examples">DataExchange-DatasetJson repository examples folder</a>
  and use .NDJSON as the extension.</p>

</body>
</html>
